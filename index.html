<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Serviceability Criteria Guideline</title>

  <!-- Viewport -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- PWA / Theme -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#1E90FF">
  <link rel="apple-touch-icon" href="icons/icon-192.png">

  <!-- Styles & Scripts -->
  <link rel="stylesheet" href="style.css">
  <script src="script.js" defer></script>
</head>
<body>

  <!-- HEADER -->
  <header class="app-header">
    <img src="icons/icon-192.png" alt="Logo" class="logo">
    <h1>Serviceability Criteria Guideline</h1>
  </header>

  <!-- DOCUMENT INFO -->
  <div id="docInfo" class="doc-info" style="display:none;"></div>

  <!-- DROPDOWNS -->
  <main class="main-content">
    <div class="dropdown-container">
      <label for="trainType">Train Type:</label>
      <select id="trainType">
        <option value="">Select Train Type</option>
      </select>

      <label for="equipmentFault">Equipment Fault:</label>
      <select id="equipmentFault" disabled>
        <option value="">Select Equipment Fault</option>
      </select>

      <label for="faultCondition">Fault/Condition:</label>
      <select id="faultCondition" disabled>
        <option value="">Select Fault/Condition</option>
      </select>
    </div>

    <!-- RESULT BOX -->
    <div class="result-box" id="resultBox" style="display:none;">
      <h2>Result</h2>
      <p><strong>Fault/Condition:</strong> <span id="resultCondition"></span></p>
      <p><strong>Category:</strong> <span id="resultCategory"></span></p>
    </div>

    <!-- DEFINITIONS BOX -->
    <div id="definitionsBox" class="definitions-box" style="display:none;">
      <h2>Category Definitions</h2>
      <ul>
        <li><strong>Critical (C) Faults:</strong> Critical faults booked during a safety preparation must not enter service. Critical faults booked in running must be removed as soon as possible, detraining passengers at the first available station, with the train shunting at a stabling siding as directed by the Train Controller if safe.</li>
        <li><strong>Maintenance (MNT) Faults:</strong> A Maintenance fault will be reviewed via the FMP system within 24 hours. Maintenance faults will be prioritised, attended and rectified if possible, or FMP annotated to reflect when it will be rectified.</li>
        <li><strong>Rectified in Running (RIR) Faults:</strong> Fault rectified in running. TMM/FWN(s) to be removed by Driver. Will be reviewed via the FMP system.</li>
        <li><strong>Serious (S) Faults:</strong> When a Serious fault has been identified, the train may enter and/or remain in revenue service, but will be removed from service as soon as reasonably practical, but not later than the end of scheduled services for that day (including services after 00:00 hours).</li>
        <li>Serious faults subcategories:
          <ul>
            <li><strong>PRTY:</strong> Higher priority to be removed from service than other serious faults.</li>
            <li><strong>RETN:</strong> After the defective leading cab arrives at destination, the train will not be driven from that cab again until fault rectified.</li>
            <li><strong>ENDR:</strong> May be driven from the current non-defective cab; defective cab must not be used in revenue service.</li>
          </ul>
        </li>
      </ul>
    </div>
  </main>

  <!-- TERMS OF SERVICE -->
  <div class="tos-container">
    <a href="#" id="tosLink">Terms of Service</a>
  </div>

  <div id="tosModal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <div class="modal-logo-container">
        <img src="icons/icon-192.png" alt="Logo" class="modal-logo">
      </div>
      <h2>Terms of Service</h2>
      <ul>
        <li>This application derives information from the most recent Serviceability Criteria Guideline provided in paperlite.</li>
        <li>Errors may be present, due to it being impractical to check every single entry.</li>
        <li>If unsure please contact PD help desk for further clarification on your fault.</li>
      </ul>
    </div>
  </div>

  <!-- FOOTER -->
  <footer class="app-footer">
    If there are any incorrect serviceability criteria guidelines please send an email to 
    <a href="mailto:tyroncabral@gmail.com">tyroncabral@gmail.com</a>
  </footer>

  <!-- SERVICE WORKER -->
  <script>
    if ("serviceWorker" in navigator) {
      window.addEventListener("load", () => {
        navigator.serviceWorker.register("service-worker.js")
          .then(() => console.log("âœ… Service Worker registered"))
          .catch((err) => console.log("Service Worker registration failed:", err));
      });
    }
  </script>

</body>
</html>
