<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Serviceability Criteria Guideline</title>

  <!-- Viewport -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- PWA / Theme -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#1E90FF">
  <link rel="apple-touch-icon" href="icons/icon-192.png">

  <!-- Styles & Scripts -->
  <link rel="stylesheet" href="style.css">
  <script src="script.js" defer></script>
</head>
<body>

  <!-- HEADER -->
  <header class="app-header">
    <img src="icons/icon-192.png" alt="Logo" class="logo">
    <h1>Serviceability Criteria Guideline</h1>
    <!-- Fault Definitions link -->
    <a href="#" id="definitionsLink" style="margin-top:5px; color:#1E90FF; text-decoration:underline;">Fault Definitions</a>
  </header>

  <!-- DOCUMENT INFO -->
  <div id="docInfo" class="doc-info" style="display:none; background-color: #fff3b0; padding: 10px; border-radius: 6px; margin: 10px 15px; font-weight: bold;"></div>

  <!-- DROPDOWNS -->
  <main class="main-content">
    <div class="dropdown-container">
      <label for="trainType">Train Type:</label>
      <select id="trainType">
        <option value="">Select Train Type</option>
      </select>

      <label for="equipmentFault">Equipment Fault:</label>
      <select id="equipmentFault" disabled>
        <option value="">Select Equipment Fault</option>
      </select>

      <label for="faultCondition">Fault/Condition:</label>
      <select id="faultCondition" disabled>
        <option value="">Select Fault/Condition</option>
      </select>
    </div>

    <div class="result-box" id="resultBox" style="display:none;">
      <h2>Result</h2>
      <p><strong>Fault/Condition:</strong> <span id="resultCondition"></span></p>
      <p><strong>Category:</strong> <span id="resultCategory"></span></p>
    </div>
  </main>

  <!-- TERMS OF SERVICE -->
  <div class="tos-container">
    <a href="#" id="tosLink">Terms of Service</a>
  </div>

  <div id="tosModal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <div class="modal-logo-container">
        <img src="icons/icon-192.png" alt="Logo" class="modal-logo">
      </div>
      <h2>Terms of Service</h2>
      <ul>
        <li>This application derives information from the most recent Serviceability Criteria Guideline provided in paperlite.</li>
        <li>Errors may be present, due to it being impractical to check every single entry.</li>
        <li>If unsure please contact PD help desk for further clarification on your fault.</li>
      </ul>
    </div>
  </div>

  <!-- DEFINITIONS MODAL -->
  <div id="definitionsModal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h2>Fault Definitions</h2>
      <ul>
        <li><strong>Critical (C) Faults:</strong> Critical faults booked during a safety preparation must not enter service. Critical faults booked in running must be removed from service as soon as possible, detraining passengers at the first available station, with the train shunting at a stabling siding as directed by the Train Controller Metrol if safe to do so.</li>
        <li><strong>Maintenance (MNT) Faults:</strong> Reviewed via FMP within 24 hours. Prioritised, attended, and rectified if possible; otherwise, the FMP system reflects when rectified.</li>
        <li><strong>Rectified in Running (RIR):</strong> Fault rectified in running. TMM/FWN(s) to be removed by Driver. Reviewed via FMP system.</li>
        <li><strong>Serious (S) Faults:</strong> Train may enter/remain in revenue service but will be removed as soon as practical, no later than end of scheduled services for the day.</li>
        <li>Serious faults may have subcategories:
          <ul>
            <li><strong>PRTY:</strong> Higher priority to be removed from service.</li>
            <li><strong>RETN:</strong> Train will not be driven from defective cab again until rectified.</li>
            <li><strong>ENDR:</strong> May be driven from non-defective cab within Metro network limits. Defective cab must not be used in revenue service.</li>
          </ul>
        </li>
      </ul>
    </div>
  </div>

  <!-- FOOTER -->
  <footer class="app-footer">
    If there are any incorrect serviceability criteria guidelines please send an email to 
    <a href="mailto:tyroncabral@gmail.com">tyroncabral@gmail.com</a>
  </footer>

  <!-- SERVICE WORKER -->
  <script>
    if ("serviceWorker" in navigator) {
      window.addEventListener("load", () => {
        navigator.serviceWorker.register("service-worker.js")
          .then(() => console.log("âœ… Service Worker registered"))
          .catch((err) => console.log("Service Worker registration failed:", err));
      });
    }
  </script>

</body>
</html>
